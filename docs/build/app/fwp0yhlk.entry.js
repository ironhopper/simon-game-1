const t=window.App.h;class e{comparePatterns(t,e){for(let a=0;a<t.length;a++)if(t[a]!=e[a])return!1;return!0}createNewStep(){return Math.ceil(4*Math.random())}}class a{gamepadTouched(t){this.userProposal.push(t.detail),this.game.comparePatterns(this.userProposal,this.animationPattern)?this.userProposal.length==this.animationPattern.length&&setTimeout(()=>{this.animationPattern=[...this.animationPattern,this.game.createNewStep()],this.userProposal=[]},500):this.history.replace(`/gameover/${this.animationPattern.length-1}`,{})}componentWillLoad(){this.game=new e,this.userProposal=[],this.animationPattern=[this.game.createNewStep()]}render(){return t("main",null,t("sn-gameboard",{animationPattern:this.animationPattern}))}static get is(){return"sn-game"}static get properties(){return{animationPattern:{state:!0},history:{type:"Any",attr:"history"}}}static get listeners(){return[{name:"gamepadTouched",method:"gamepadTouched"}]}static get style(){return""}}class n{constructor(){this.step=0}get heading(){return this.isPlaying?"Memorize the pattern":"Replay the pattern"}get isPlaying(){return this.step<this.animationPattern.length}animationPatternChanged(){this.step=0}blinkFinished(){this.step+=1}render(){let e=[];for(let a=1;a<=4;a++){let n={gamepad:!0};n["gamepad-"+a]=!0,n.blink=this.animationPattern[this.step]==a,e.push(t("button",this.isPlaying?{class:n}:{onClick:()=>this.gamepadTouched.emit(a),class:n}))}return[t("h2",null,this.heading),t("div",{class:"gameboard"},e)]}static get is(){return"sn-gameboard"}static get properties(){return{animationPattern:{type:"Any",attr:"animation-pattern",watchCallbacks:["animationPatternChanged"]},step:{state:!0}}}static get events(){return[{name:"gamepadTouched",method:"gamepadTouched",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"animationiteration",method:"blinkFinished"}]}static get style(){return".gameboard{display:grid;width:100vw;height:80vw;grid-template-columns:40% 40%;grid-template-rows:auto;grid-gap:10px 10px;-ms-flex-pack:center;justify-content:center}.gamepad{border-radius:20%;border:0}.gamepad:active,.gamepad:focus{outline:none}.gamepad:active{opacity:.4}.gamepad-1{border-top-left-radius:75%;background:#ff0}.gamepad-2{border-top-right-radius:75%;background:red}.gamepad-3{border-bottom-left-radius:75%;background:green}.gamepad-4{border-bottom-right-radius:75%;background:#00f}.blink{-webkit-animation-name:blink;animation-name:blink;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}\@-webkit-keyframes blink{0%{opacity:1}25%{opacity:.4}50%{opacity:1}}\@keyframes blink{0%{opacity:1}25%{opacity:.4}50%{opacity:1}}"}}export{a as SnGame,n as SnGameboard};